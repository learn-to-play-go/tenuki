{"version":3,"sources":["../src/dom-renderer.js"],"names":[],"mappings":"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","file":"dom-renderer.js","sourcesContent":["import utils from \"./utils\";\nimport Renderer from \"./renderer\";\n\nconst DOMRenderer = function(boardElement, { hooks, options }) {\n  Renderer.call(this, boardElement, { hooks: hooks, options: options });\n\n  if (this.smallerStones) {\n    utils.addClass(boardElement, \"tenuki-smaller-stones\");\n  }\n\n  utils.addClass(boardElement, \"tenuki-dom-renderer\");\n};\n\nDOMRenderer.prototype = Object.create(Renderer.prototype);\nDOMRenderer.prototype.constructor = DOMRenderer;\n\nDOMRenderer.prototype._setup = function(boardState) {\n  Renderer.prototype._setup.call(this, boardState);\n\n  this.BOARD_LENGTH += 1;\n  this.computeSizing();\n};\n\nDOMRenderer.prototype.generateBoard = function(boardState) {\n  const contentsContainer = utils.createElement(\"div\");\n\n  utils.appendElement(contentsContainer, utils.createElement(\"div\", { class: \"lines horizontal\" }));\n  utils.appendElement(contentsContainer, utils.createElement(\"div\", { class: \"lines vertical\" }));\n  utils.appendElement(contentsContainer, utils.createElement(\"div\", { class: \"hoshi-points\" }));\n  utils.appendElement(contentsContainer, utils.createElement(\"div\", { class: \"intersections\" }));\n\n  Renderer.hoshiPositionsFor(boardState.boardSize).forEach(h => {\n    const hoshi = utils.createElement(\"div\", { class: \"hoshi\" });\n    hoshi.style.left = (h.left * (this.INTERSECTION_GAP_SIZE + 1)) + \"px\";\n    hoshi.style.top = (h.top * (this.INTERSECTION_GAP_SIZE + 1)) + \"px\";\n\n    utils.appendElement(contentsContainer.querySelector(\".hoshi-points\"), hoshi);\n  });\n\n  for (let y = 0; y < boardState.boardSize; y++) {\n    const horizontalLine = utils.createElement(\"div\", { class: \"line horizontal\" });\n    horizontalLine.setAttribute(\"data-left-gutter\", boardState.yCoordinateFor(y));\n    utils.appendElement(contentsContainer.querySelector(\".lines.horizontal\"), horizontalLine);\n\n    const verticalLine = utils.createElement(\"div\", { class: \"line vertical\" });\n    verticalLine.setAttribute(\"data-top-gutter\", boardState.xCoordinateFor(y));\n    utils.appendElement(contentsContainer.querySelector(\".lines.vertical\"), verticalLine);\n\n    for (let x = 0; x < boardState.boardSize; x++) {\n      const intersectionElement = utils.createElement(\"div\", { class: \"intersection empty\" });\n      const stoneElement = utils.createElement(\"div\", { class: \"stone\" });\n      utils.appendElement(intersectionElement, stoneElement);\n\n      intersectionElement.setAttribute(\"data-position-x\", x);\n      intersectionElement.setAttribute(\"data-position-y\", y);\n\n      intersectionElement.style.left = (x * (this.INTERSECTION_GAP_SIZE + 1)) + \"px\";\n      intersectionElement.style.top = (y * (this.INTERSECTION_GAP_SIZE + 1)) + \"px\";\n\n      utils.appendElement(contentsContainer.querySelector(\".intersections\"), intersectionElement);\n\n      this.grid[y] = this.grid[y] || [];\n      this.grid[y][x] = intersectionElement;\n\n      this.addIntersectionEventListeners(intersectionElement, y, x);\n    }\n  }\n\n  // prevent the text-selection cursor\n  utils.addEventListener(contentsContainer.querySelector(\".lines.horizontal\"), \"mousedown\", function(e) {\n    e.preventDefault();\n  });\n  utils.addEventListener(contentsContainer.querySelector(\".lines.vertical\"), \"mousedown\", function(e) {\n    e.preventDefault();\n  });\n\n  contentsContainer.querySelector(\".lines.horizontal\").style.width = ((this.INTERSECTION_GAP_SIZE * (boardState.boardSize - 1)) + boardState.boardSize) + \"px\";\n  contentsContainer.querySelector(\".lines.horizontal\").style.height = ((this.INTERSECTION_GAP_SIZE * (boardState.boardSize - 1)) + boardState.boardSize) + \"px\";\n  contentsContainer.querySelector(\".lines.vertical\").style.width = ((this.INTERSECTION_GAP_SIZE * (boardState.boardSize - 1)) + boardState.boardSize) + \"px\";\n  contentsContainer.querySelector(\".lines.vertical\").style.height = ((this.INTERSECTION_GAP_SIZE * (boardState.boardSize - 1)) + boardState.boardSize) + \"px\";\n\n  return contentsContainer;\n};\n\nDOMRenderer.prototype.setIntersectionClasses = function(intersectionEl, intersection, classes) {\n  if (intersectionEl.className !== classes.join(\" \")) {\n    intersectionEl.className = classes.join(\" \");\n  }\n};\n\nexport default DOMRenderer;\n"]}